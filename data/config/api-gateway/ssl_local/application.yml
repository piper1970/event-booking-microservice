server:
  ssl:
    enabled: true
    bundle: event-booking-service

spring:
  ssl:
    bundle:
      jks:
        event-booking-service:
          keystore:
            location: file:${API_KEYSTORE_PATH}
            password: ${API_KEYSTORE_PASSWORD}
            type: PKCS12
            alias: ${API_KEYSTORE_ALIAS}
          truststore:
            location: file:${API_TRUSTSTORE_PATH}
            password: ${API_TRUSTSTORE_PASSWORD}
            type: PKCS12

  security:
    oauth2:
      client:
        provider:
          keycloak:
            jwk-set-uri: https://localhost:8441/realms/piper1970/protocol/openid-connect/certs
            authorization-uri: https://localhost:8441/realms/piper1970/protocol/openid-connect/auth
            token-uri: https://localhost:8441/realms/piper1970/protocol/openid-connect/token
            user-info-uri: https://localhost:8441/realms/piper1970/protocol/openid-connect/userinfo
            user-name-attribute: sub
  cloud:
    gateway:
      globalcors:
        cors-configuration:
          '[/**]':
            allowed-origins:
              - "https://localhost:${server.port}" # Gateway URL
              - "https://localhost:8441" # Keycloak URL
              - "http://localhost:8888" # Config URL
            allowed-methods:
              - GET
              - POST
              - PUT
              - PATCH
              - OPTIONS
              - HEAD
            allowed-headers: "*"
            allow-credentials: true
